{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UAqBaA;;;;;yBAAAA;AAAa;;;cAAbA;;;mBARA,CACT;AACEC,iBAAO,EAAEC,mEADX;AAEEC,kBAAQ,EAAEC,uEAFZ;AAGEC,eAAK,EAAE;AAHT,SADS;AAMVC,kBAPQ,CAACC,yDAAD,EAAeC,uEAAf,EAAoCC,qEAApC,EAAoDC,+DAApD,EAAkEC,uEAAlE,CAOR;;;;4HAEUX,gBAAa;AAAAY,yBAVTC,wEAUS;AAVOP,oBACrBC,yDADqB,EACPC,uEADO,EACcC,qEADd,EAC8BC,+DAD9B,EAC4CC,uEAD5C;AAUP;AATmE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACgBrFG;;AACIA;;AACAA;;AACAA;;AACJA;;;;;;AAHsBA;;AAAAA;;AACAA;;AAAAA;;AACAA;;AAAAA;;;;;;;;AAEtBA;;AACIA;;AAGIA;AAAAA;;AAAA;;AAAA;AAAA;;;;AACJA;;AAEAA;;AAE0CA;AAAAA;;AAAA;;AAAA;AAAA;;;;AAE1CA;;AAEAA;;AAE0CA;AAAAA;;AAAA;;AAAA;AAAA;;;;AAE1CA;;AACJA;;;;;;AAhByDA;;AAAAA;;AADnCA,mGAAwB,WAAxB,EAAwB,kCAAxB,EAAwB,OAAxB,EAAwBC,kCAAxB;;AAOqBD;;AAAAA;;AADrBA,mGAAwB,WAAxB,EAAwB,oBAAxB,EAAwB,OAAxB,EAAwBC,kCAAxB;;AAOdD;;AAAAA;;AADcA,mGAAwB,WAAxB,EAAwB,kBAAxB,EAAwB,OAAxB,EAAwBC,kCAAxB;;;;UCnCjBC;AAcX,mCACUC,iBADV,EAEUC,oBAFV,EAEqD;AAAA;;AAD3C;AACA;AAfV,kCAAwB;AACtBC,0BAAc,EAAE,CADM;AAEtBC,2BAAe,EAAE,CAFK;AAGtBC,4BAAgB,EAAE,CAHI;AAItBC,sBAAU,EAAE,CAJU;AAKtBC,8BAAkB,EAAE,CALE;AAMtBC,6BAAiB,EAAG;AANE,WAAxB;AASA,gCAAiB,IAAjB;AAwCA,yBAAU,KAAV;AACA,8BAAe,KAAf;AAlCI;;;;iBAEJ,oBAAQ;AACN,iBAAKC,KAAL,GAAa,KAAKP,oBAAL,CAA0BQ,QAA1B,EAAb;AACA,iBAAKC,UAAL,GAAkB,KAAKT,oBAAL,CAA0BU,aAA1B,EAAlB;AACA,iBAAKC,mBAAL,GAA2BC,MAAM,CAACC,cAAP,CAAsBC,OAAtB,CAA8B,oBAA9B,CAA3B;;AACA,gBAAG,KAAKH,mBAAL,KAA6BI,SAAhC,EAA2C;AACzC,mBAAKJ,mBAAL,GAA2B,GAA3B;AACD;;AACD,iBAAKK,oBAAL,GAA4BJ,MAAM,CAACC,cAAP,CAAsBC,OAAtB,CAA8B,qBAA9B,CAA5B;;AACA,gBAAG,KAAKE,oBAAL,KAA8BD,SAAjC,EAA4C;AAC1C,mBAAKC,oBAAL,GAA4B,GAA5B;AACD;;AACD,iBAAKC,UAAL;AACA,iBAAKC,gBAAL,CAAsB;AACpBP,iCAAmB,EAAE,KAAKA,mBADN;AAEpBK,kCAAoB,EAAE,KAAKA;AAFP,aAAtB;;AAIA,gBAAI,KAAKT,KAAL,CAAWY,OAAX,CAAmB,KAAnB,IAA4B,CAAC,CAAjC,EAAoC;AAClC,mBAAKlB,cAAL,GAAsB,KAAtB;AACD;AACF;;;iBAED,iBAAK;AACH,mBAAO,KAAKM,KAAL,CAAWY,OAAX,CAAmB,KAAnB,IAA4B,CAAC,CAA7B,IAAkC,KAAKZ,KAAL,CAAWY,OAAX,CAAmB,MAAnB,IAA6B,CAAC,CAAvE;AACD;;;iBACD,qBAAS;AACP,mBAAO,KAAKZ,KAAL,CAAWY,OAAX,CAAmB,IAAnB,IAA2B,CAAC,CAA5B,IAAiC,KAAKZ,KAAL,CAAWY,OAAX,CAAmB,IAAnB,IAA2B,CAAC,CAA7D,IAAkE,KAAKZ,KAAL,CAAWY,OAAX,CAAmB,KAAnB,IAA4B,CAAC,CAAtG;AACD;;;iBACD,gBAAI;AACF,mBAAO,KAAKZ,KAAL,CAAWY,OAAX,CAAmB,IAAnB,IAA2B,CAAC,CAAnC;AACD,YAID;;;;iBACA,sBAAU;AAAA;;AACR,gBAAIC,GAAG,GAAG,UAAV;AACA,iBAAKC,OAAL,GAAe,IAAf;AACA,iBAAKtB,iBAAL,CACGuB,UADH,CACcC,mFAAyBH,GADvC,EAEGI,SAFH,CAEa,UAACC,QAAD,EAAa;AACtB,mBAAI,CAACJ,OAAL,GAAe,KAAf;;AACA,kBAAII,QAAQ,CAACC,MAAT,KAAoB,IAAxB,EAA8B;AAC5B,oBAAIC,OAAO,GAAGF,QAAQ,CAACG,IAAvB;AACA,qBAAI,CAACC,gBAAL,CAAsB5B,cAAtB,GAAuC0B,OAAO,CAAC1B,cAA/C;AACA,qBAAI,CAAC4B,gBAAL,CAAsBvB,iBAAtB,GAA0CqB,OAAO,CAACrB,iBAAlD;AACA,qBAAI,CAACuB,gBAAL,CAAsBxB,kBAAtB,GAA2CsB,OAAO,CAACtB,kBAAnD;AACD;AACF,aAVH,EAUK,YAAK;AACN,mBAAI,CAACgB,OAAL,GAAe,KAAf;AACD,aAZH;AAaD;;;iBACD,0BAAiBS,MAAjB,EAAkC;AAAA;;AAChC,gBAAIV,GAAG,GAAG,gBAAV;AACA,iBAAKW,YAAL,GAAoB,IAApB;AACA,iBAAKhC,iBAAL,CACKuB,UADL,CACgBC,mFAAyBH,GADzC,EAC8CU,MAD9C,EAEKN,SAFL,CAEe,UAACC,QAAD,EAAa;AACtB,oBAAI,CAACM,YAAL,GAAoB,KAApB;;AACA,kBAAIN,QAAQ,CAACC,MAAT,KAAoB,IAAxB,EAA8B;AAC5B,oBAAIM,MAAM,GAAGP,QAAQ,CAACG,IAAtB;AACA,sBAAI,CAACC,gBAAL,CAAsB3B,eAAtB,GAAwC8B,MAAM,CAAC9B,eAA/C;AACA,sBAAI,CAAC2B,gBAAL,CAAsB1B,gBAAtB,GAAyC6B,MAAM,CAAC7B,gBAAhD;AACA,sBAAI,CAAC0B,gBAAL,CAAsBzB,UAAtB,GAAmC4B,MAAM,CAAC5B,UAA1C;AACD;AACF,aAVL,EAUO,YAAK;AACN,oBAAI,CAACiB,OAAL,GAAe,KAAf;AACD,aAZL;AAaD;;;;;;;yBAtFUvB,mBAAgBF;AAAA;;;cAAhBE;AAAgBmC;AAAAC;AAAAC;AAAAC;AAAAC;AAAA;ADX7BzC;;AACIA;;AACIA;;AACIA;;;;AAKAA;;;;AAOAA;;;;AAOJA;;AACAA;;AACIA;;AACIA;;AACJA;;AACJA;;AACAA;;AAKAA;;AAmBJA;;AACJA;;;;AAjDuDA;;AAAAA;;AADzBA,6FAAmB,MAAnB,EAAmB0C,eAAnB,EAAmB,WAAnB,EAAmB,wBAAnB,EAAmB,OAAnB,EAAmBA,sCAAnB;;AAMiD1C;;AAAAA;;AADjDA,6FAAmB,MAAnB,EAAmB0C,eAAnB,EAAmB,WAAnB,EAAmB,gDAAnB,EAAmB,OAAnB,EAAmBA,mCAAnB;;AAQd1C;;AAAAA;;AADcA,6FAAmB,MAAnB,EAAmB0C,UAAnB,EAAmB,WAAnB,EAAmB,2BAAnB,EAAmB,OAAnB,EAAmBA,mCAAnB;;AAaiD1C;;AAAAA;;AAKAA;;AAAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AE1B/E,UAAM2C,MAAM,GAAW,CACrB;AACEC,YAAI,EAAE,EADR;AAEE;AACAC,iBAAS,EAAE9C,wEAHb;AAIEiC,YAAI,EAAE;AACJrB,eAAK,EAAE,CACLmC,+EADK,EAELA,qFAFK,EAGLA,yEAHK,EAILA,6EAJK,EAKLA,iEALK;AADH;AAJR,OADqB,CAAvB;;UAqBaC;;;;;yBAAAA;AAAmB;;;cAAnBA;;;kBAHF,CAACC,mEAAsBL,MAAtB,CAAD,GACCK;;;;4HAECD,sBAAmB;AAAAvD;AAAAyD,oBAFpBD,yDAEoB;AAAA;AAFR;;;;","names":["SummaryModule","provide","_angular_common_http__WEBPACK_IMPORTED_MODULE_5__","useClass","keycloak_angular__WEBPACK_IMPORTED_MODULE_6__","multi","imports","_angular_common__WEBPACK_IMPORTED_MODULE_7__","_summay_routing_module__WEBPACK_IMPORTED_MODULE_1__","_settings_settings_module__WEBPACK_IMPORTED_MODULE_2__","_shared_shared_module__WEBPACK_IMPORTED_MODULE_3__","_angular_material_divider__WEBPACK_IMPORTED_MODULE_8__","declarations","_summary_summary_component__WEBPACK_IMPORTED_MODULE_0__","_angular_core__WEBPACK_IMPORTED_MODULE_4__","ctx_r1","SummaryComponent","backendApiService","autheticationService","activePatients","parameterAlerts","arrhythmiaAlerts","techAlerts","dischargedPatients","unassignedPatches","roles","getRoles","loggedUser","getLoggedUser","parameterAlertsFrom","window","sessionStorage","getItem","undefined","arrhythmiaAlertsFrom","getSummary","getAlertsSummary","indexOf","url","loading","callGetApi","src_environments_environment__WEBPACK_IMPORTED_MODULE_0__","subscribe","response","status","summary","data","dashboardSummary","params","alertLoading","alerts","selectors","decls","vars","consts","template","ctx","routes","path","component","_enum_roles_enum__WEBPACK_IMPORTED_MODULE_1__","SummayRoutingModule","_angular_router__WEBPACK_IMPORTED_MODULE_3__","exports"],"sources":["webpack:///src/app/summary/summary.module.ts","webpack:///src/app/summary/summary/summary.component.html","webpack:///src/app/summary/summary/summary.component.ts","webpack:///src/app/summary/summay-routing.module.ts"],"sourcesContent":["import { NgModule } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { SummaryComponent } from \"./summary/summary.component\";\nimport { SummayRoutingModule } from \"./summay-routing.module\";\nimport { SettingsModule } from \"../settings/settings.module\";\nimport { SharedModule } from \"../shared/shared.module\";\nimport { HTTP_INTERCEPTORS } from \"@angular/common/http\";\nimport {MatDividerModule} from '@angular/material/divider';\nimport { KeycloakBearerInterceptor } from \"keycloak-angular\";\n\n@NgModule({\n  declarations: [SummaryComponent],\n  imports: [CommonModule, SummayRoutingModule, SettingsModule, SharedModule, MatDividerModule],\n  providers: [\n    {\n      provide: HTTP_INTERCEPTORS,\n      useClass: KeycloakBearerInterceptor,\n      multi: true,\n    },\n  ],\n})\nexport class SummaryModule {}\n","<div class=\"grid-fluid-container\">\r\n    <div class=\"container grid-aligning-summary pt-5 pb-5 mx-auto col-md-12 col-lg-10 col-xl-8 col-xxl-7\">\r\n        <div class=\"row justify-content-center align-items-center card-items\">\r\n            <app-setting-card [loading]=\"loading\" [view]=\"isSCGCPHY()\" class=\"child col-md-4 col-sm-12\"\r\n                [routerUrl]=\"'/patients/posted-final'\" title=\"{{'home_alerts.label_posted_final' | translate}}\"\r\n                image=\"posted_final.png\" [count]=\"dashboardSummary.unassignedPatches\"\r\n                subTitle=\"home_cards.card_sub_title_reports\">\r\n            </app-setting-card>\r\n            <app-setting-card [loading]=\"loading\" [view]=\"isSCGCPHY()\" class=\"child col-md-4 col-sm-12\"\r\n                [routerUrl]=\"'/pending-interpretation/pending-interpretation'\" title=\"{{'home_alerts.label_pi' | translate}}\"\r\n                image=\"parameter-alerts.png\" [count]=\"dashboardSummary.activePatients\"\r\n                subTitle=\"home_cards.card_sub_title_reports\">\r\n            </app-setting-card>\r\n\r\n            <!-- Card containing Register button  -->\r\n            <app-setting-card [loading]=\"loading\" [view]=\"isSC()\" class=\"col-md-4 col-sm-12\"\r\n                title=\"{{'home_alerts.label_active_patients'|translate}}\" [routerUrl]=\"'/patients/active-patients'\"\r\n                image=\"current_patients.png\" [count]=\"dashboardSummary.activePatients\"\r\n                subTitle=\"home_cards.card_sub_title_patients\"\r\n                register=\"true\">\r\n            </app-setting-card>            \r\n\r\n        </div>\r\n        <div class=\"row d-none d-md-block\">\r\n            <div class=\"col-sm-10 my-5 mx-auto\">\r\n                <mat-divider></mat-divider>\r\n            </div>\r\n        </div>\r\n        <div class=\"row justify-content-center align-items-center card-items\" *ngIf=\"!isSCGCPHY()\">\r\n            <app-setting-card [view]=\"isCFA()\" class=\"col-md-4 col-sm-12\"></app-setting-card>\r\n            <app-setting-card [view]=\"isCFA()\" class=\"col-md-4 col-sm-12\"></app-setting-card>\r\n            <app-setting-card [view]=\"isCFA()\" class=\"col-md-4 col-sm-12\"></app-setting-card>\r\n        </div>\r\n        <div class=\"row justify-content-center align-items-center card-items\" *ngIf=\"isSCGCPHY()\">\r\n            <app-setting-card [loading]=\"alertLoading\" class=\"child col-md-4 col-sm-12\"\r\n                [routerUrl]=\"'/patients/interpretation-history'\" title=\"{{'home_alerts.label_ih'| translate}}\"\r\n                image=\"inter_history.png\" [count]=\"dashboardSummary.techAlerts\"\r\n                (fetchSummary)=\"getAlertsSummary($event)\" subTitle=\"home_cards.card_sub_title_reports\">\r\n            </app-setting-card>\r\n\r\n            <app-setting-card [loading]=\"alertLoading\" class=\"child col-md-4 col-sm-12\"\r\n                [routerUrl]=\"'/patients/archived'\" title=\"{{'home_alerts.label_archive'| translate}}\" image=\"archive.png\"\r\n                [count]=\"dashboardSummary.techAlerts\" (fetchSummary)=\"getAlertsSummary($event)\"\r\n                subTitle=\"home_cards.card_sub_title_reports\">\r\n            </app-setting-card>\r\n\r\n            <app-setting-card [loading]=\"alertLoading\" class=\"child col-md-4 col-sm-12\" [routerUrl]=\"'technical-alerts'\"\r\n                title=\"{{'home_alerts.label_biosensor'| translate}}\" image=\"biosensor.png\"\r\n                [count]=\"dashboardSummary.techAlerts\" (fetchSummary)=\"getAlertsSummary($event)\"\r\n                subTitle=\"home_cards.card_sub_title_biosensors\">\r\n            </app-setting-card>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, OnInit } from \"@angular/core\";\nimport { BackendApiService } from \"../../services/backendapi.service\";\nimport { CFSummary } from \"../../interfaces/query-params.interface\";\nimport { AuthenticationService } from \"@services/authentication.service\";\nimport { environment } from \"src/environments/environment\";\n\n@Component({\n  selector: \"app-summary\",\n  templateUrl: \"./summary.component.html\",\n  styleUrls: [\"./summary.component.scss\"],\n})\nexport class SummaryComponent implements OnInit {\n  dashboardSummary: any = {\n    activePatients: 0,\n    parameterAlerts: 0,\n    arrhythmiaAlerts: 0,\n    techAlerts: 0,\n    dischargedPatients: 0,\n    unassignedPatches : 0\n  };\n  roles;\n  activePatients = true;\n  parameterAlertsFrom;\n  arrhythmiaAlertsFrom;\n\n  constructor(\n    private backendApiService: BackendApiService,\n    private autheticationService: AuthenticationService\n  ) {}\n  loggedUser: any;\n  ngOnInit() {    \n    this.roles = this.autheticationService.getRoles();\n    this.loggedUser = this.autheticationService.getLoggedUser();\n    this.parameterAlertsFrom = window.sessionStorage.getItem(\"parameter-duration\");\n    if(this.parameterAlertsFrom === undefined) {\n      this.parameterAlertsFrom = 360;\n    }\n    this.arrhythmiaAlertsFrom = window.sessionStorage.getItem(\"arrhythmia-duration\");\n    if(this.arrhythmiaAlertsFrom === undefined) {\n      this.arrhythmiaAlertsFrom = 360;\n    }\n    this.getSummary();\n    this.getAlertsSummary({\n      parameterAlertsFrom: this.parameterAlertsFrom,\n      arrhythmiaAlertsFrom: this.arrhythmiaAlertsFrom\n    });\n    if (this.roles.indexOf(\"CFA\") > -1) {\n      this.activePatients = false;      \n    }\n  }\n\n  isCFA(){\n    return this.roles.indexOf(\"CFA\") > -1 || this.roles.indexOf(\"CFAC\") > -1;\n  }\n  isSCGCPHY() {\n    return this.roles.indexOf(\"SC\") > -1 || this.roles.indexOf(\"GC\") > -1 || this.roles.indexOf(\"PHY\") > -1;\n  }\n  isSC() {\n    return this.roles.indexOf(\"SC\") > -1;\n  }\n\n  loading = false;\n  alertLoading = false;\n  // Fetch Clinical facility summary page data\n  getSummary() {\n    let url = \"summary/\";\n    this.loading = true;\n    this.backendApiService\n      .callGetApi(environment.dataApiUrl + url)\n      .subscribe((response) => {\n        this.loading = false;\n        if (response.status === \"OK\") {\n          let summary = response.data;\n          this.dashboardSummary.activePatients = summary.activePatients;\n          this.dashboardSummary.unassignedPatches = summary.unassignedPatches;\n          this.dashboardSummary.dischargedPatients = summary.dischargedPatients;\n        }\n      }, () => {\n        this.loading = false;\n      });\n  }\n  getAlertsSummary(params: CFSummary) {\n    let url = \"summary/alerts\";\n    this.alertLoading = true;\n    this.backendApiService\n        .callGetApi(environment.dataApiUrl + url, params)\n        .subscribe((response) => {\n          this.alertLoading = false;\n          if (response.status === \"OK\") {\n            let alerts = response.data;\n            this.dashboardSummary.parameterAlerts = alerts.parameterAlerts;\n            this.dashboardSummary.arrhythmiaAlerts = alerts.arrhythmiaAlerts;\n            this.dashboardSummary.techAlerts = alerts.techAlerts;\n          }\n        }, () => {\n          this.loading = false;\n        });\n  }\n}\n","import { NgModule } from \"@angular/core\";\r\nimport { Routes, RouterModule } from \"@angular/router\";\r\nimport { MatToolbarModule } from \"@angular/material/toolbar\";\r\nimport { SummaryComponent } from \"./summary/summary.component\";\r\nimport { AuthGuard } from \"../guards/auth.guard\";\r\nimport { UserRoles } from \"../enum/roles.enum\";\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: \"\",\r\n    //canActivate: [AuthGuard],\r\n    component: SummaryComponent,\r\n    data: {\r\n      roles: [\r\n        UserRoles.CLINICAL_FACILITY_ADMIN,\r\n        UserRoles.CLINICAL_FACILITY_ADMIN_CLONE,\r\n        UserRoles.GENERAL_CLINICIAN,\r\n        UserRoles.SUPERVISORY_CLINICIAN,\r\n        UserRoles.PHYSICIAN,\r\n      ],\r\n    }\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class SummayRoutingModule {}\r\n"]}